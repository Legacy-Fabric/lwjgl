def proparties = project.praps

// clean the generated files
tasks.register('clean-generated', Delete) {
    description = "Deletes the generated java source"
    delete file("lwjgl/src/generated/java")
}

tasks.register('clean-generated-native', Delete) {
    description = "Deletes the generated native source"
    dependsOn("clean-generated")
    delete proparties['natives_generated']
}

// Cleans up any non-native files created during the execution of this script
tasks.register('clean-java', Delete) {
    description = "Cleans non-native files generated by this ant script"
    dependsOn("clean-generated")
    delete proparties['lwjgl.temp'], proparties['lwjgl.docs'].toString() + "/javadoc", proparties['lwjgl.bin'].toString() + "/org"
}

// Useful when we need to force native recompilation
tasks.register('clean-native', Delete) {
    description = "Cleans native files generated by this ant script"
    dependsOn("clean-generated-native")
    delete proparties['lwjgl.bin'].toString() + "/lwjgles", proparties['lwjgl.bin'].toString() + "/lwjgl"

    for (final def fl in proparties['lwjgl.src.native'].listFiles()) {
        if (fl.name.endsWith(".h")) {
            fl.delete()
        }
    }
}

tasks.clean.dependsOn("clean-java", "clean-native")